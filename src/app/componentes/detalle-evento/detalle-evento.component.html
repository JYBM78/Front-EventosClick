<div class="container mt-4" *ngIf="evento">
  <!-- CABECERA DEL EVENTO -->
  <div class="card mb-4 shadow-sm">
    <div class="card-header text-center bg-primary text-white">
      <h2>{{ evento.nombre }}</h2>
    </div>
    <div class="card-body row align-items-center">
      <div class="col-md-4 text-center">
        <img
          [src]="evento.imagenPortada"
          alt="Imagen del Evento"
          class="img-fluid rounded shadow-sm"
          style="max-height: 250px; object-fit: cover;"
        />
      </div>
      <div class="col-md-8">
        <p><strong>Descripción:</strong> {{ evento.descripcion }}</p>
        <p><strong>Ciudad:</strong> {{ evento.ciudad }}</p>
        <p><strong>Fecha:</strong> {{ evento.fechaEvento | date: 'dd MMMM, yyyy' }}</p>
        <p><strong>Estado:</strong> {{ evento.estado }}</p>
      </div>
    </div>
  </div>

  <!-- SECCIÓN DE LOCALIDADES -->
  <div class="card mb-4 shadow-sm" *ngIf="evento.localidades?.length">
    <div class="card-header bg-secondary text-white text-center">
      <h4 class="mb-0">Mapa de Localidades</h4>
    </div>

    <div class="card-body text-center">
      <!-- Imagen o esquema visual de localidades -->
      <div class="mb-4">
        <img
          [src]="evento.imagenLocalidades"
          alt="Mapa de localidades"
          class="img-fluid rounded shadow-sm"
          style="max-height: 400px;"
        />
      </div>

      <!-- Tabla con detalles -->
      <div class="table-responsive mt-3">
        <table class="table table-bordered text-center align-middle">
          <thead class="table-dark">
            <tr>
              <th>Localidad</th>
              <th>Precio</th>
              <th>Capacidad Máxima</th>
              <th>Seleccionar</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let localidad of evento.localidades">
              <td class="fw-bold">{{ localidad.nombre }}</td>
              <td>{{ localidad.precio | currency:'COP':'symbol':'1.0-0' }}</td>
              <td>{{ localidad.capacidadMaxima }}</td>
              <td>
                <button class="btn btn-outline-primary btn-sm" (click)="seleccionarLocalidad(localidad)">
                  Seleccionar
                </button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
    <!-- MAPA DE LOCALIDADES (imagenLocalidades) -->
  <div class="card mb-4" *ngIf="evento.imagenLocalidades">
    <div class="card-header bg-dark text-white text-center">
      <h4 class="mb-0">Mapa de Localidades</h4>
    </div>
    <div class="card-body text-center">
      <img
        [src]="evento.imagenLocalidades"
        alt="Mapa de Localidades"
        class="img-fluid rounded shadow-lg"
        style="max-width: 90%; border: 2px solid #ddd;"
      />
      <p class="mt-3 text-muted">
        Visualiza las secciones disponibles del evento
      </p>
    </div>
  </div>

  <!-- DETALLE DE LOCALIDAD SELECCIONADA -->
  <div class="card shadow-sm mb-4" *ngIf="localidadSeleccionada">
    <div class="card-header bg-info text-white d-flex justify-content-between align-items-center">
      <h4 class="mb-0">Localidad: {{ localidadSeleccionada.nombre }}</h4>
      <div>
        <label class="me-2 fw-bold">Cantidad:</label>
        <input
          type="number"
          min="1"
          [(ngModel)]="cantidadSeleccionada"
          class="form-control d-inline-block text-center"
          style="width: 80px;"
        />
      </div>
    </div>

    <div class="card-body text-center">
      <p><strong>Precio por entrada:</strong> {{ localidadSeleccionada.precio | currency:'COP':'symbol':'1.0-0' }}</p>

<!-- MAPA DE SILLAS -->
<div class="mapa-cine mt-4">
  <div class="pantalla text-center mb-4">ESCENARIO</div>

  <div class="contenedor-salas">
    <div class="fila"
      *ngFor="let fila of obtenerFilas(localidadSeleccionada.sillas)">
      <div
        *ngFor="let silla of fila"
        (click)="alternarSeleccionSilla(silla)"
        [class.silla]="true"
        [class.disponible]="silla.disponible"
        [class.ocupada]="!silla.disponible"
        [class.seleccionada]="sillasSeleccionadas.includes(silla)"
      >
        {{ silla.codigo }}
      </div>
    </div>
  </div>

  <!-- LEYENDA -->
  <div class="leyenda mt-4 text-center">
    <span class="badge bg-success me-2">Disponible</span>
    <span class="badge bg-warning text-dark me-2">Seleccionada</span>
    <span class="badge bg-secondary">Ocupada</span>
  </div>
</div>


    <!-- BOTÓN DE COMPRA -->
    <div class="card-footer text-center">
      <button (click)="comprarEntradas()" class="btn btn-success btn-lg px-4">
        Añadir al carrito
      </button>
    </div>
  </div>
</div>
